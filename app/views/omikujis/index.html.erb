<%= turbo_frame_tag "result-container" do %>
  <h1>おみくじ結果</h1>
  <div class="container">
    <% if @snake %>
      <!-- 結果表示 -->
      <h2><%= @snake.omikuji_result.name %></h2>
      <p><%= @snake.omikuji_result.description %></p>
      <%= link_to "おみくじを引き直しますか？", omikujis_path, data: { turbo_frame: "result-container" }, class: "button" %>

      <!-- 蛇の表示 -->
      <div class="centered-container">
        <div class="snake">
          <!-- ヘッド部分 -->
          <div class="head" style="background-color: <%= @snake.snake_colors.find_by(layer: 1)&.color %>">
            <div class="eye left"></div>
            <div class="eye right"></div>
            <div class="omega"></div>
            <div class="tongue"></div>
          </div>

          <!-- トグロ部分 -->
          <% (1..4).each do |layer| %>
            <div class="rounded-rectangle layer<%= layer %>" 
                 style="background-color: <%= @snake.snake_colors.find_by(layer: layer)&.color %>"></div>
          <% end %>

          <!-- 尾部分 -->
          <div class="tail-container">
            <div class="tail-outer" style="background-color: <%= @snake.snake_colors.find_by(layer: 'tail-outer')&.color %>;"></div>
            <div class="tail-inner">
              <div class="tail-inner-cut">
                <div class="tail-text"><%= @snake.omikuji_result.name %></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% else %>
      <p>蛇のデータがありません。</p>
    <% end %>
    <%= link_to "ホームに戻る？", root_path, data: { turbo_frame: "result-container" }, class: "button" %>
  </div>
<% end %>